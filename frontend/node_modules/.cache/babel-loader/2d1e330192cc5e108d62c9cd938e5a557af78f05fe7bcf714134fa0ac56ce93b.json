{"ast":null,"code":"import _objectSpread from\"C:/Users/Shashan/Videos/truegradient - 2 Assignment/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{signIn}from\"../features/auth/authSlice\";import{Link,useNavigate}from\"react-router-dom\";import\"./SignIn.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function SignIn(){const dispatch=useDispatch();const{loading}=useSelector(s=>s.auth);const navigate=useNavigate();const[form,setForm]=useState({identifier:\"\",password:\"\"});const[message,setMessage]=useState(\"\");const[isSuccess,setIsSuccess]=useState(false);const submit=async e=>{e.preventDefault();if(!form.identifier||!form.password){setIsSuccess(false);setMessage(\"Please enter your username/email and password\");return;}try{const res=await dispatch(signIn({identifier:form.identifier,password:form.password}));if(res.meta.requestStatus===\"fulfilled\"){setIsSuccess(true);setMessage(\"Login successful! Redirecting...\");setTimeout(()=>navigate(\"/\"),1500);}else{var _res$payload;setIsSuccess(false);setMessage(((_res$payload=res.payload)===null||_res$payload===void 0?void 0:_res$payload.message)||\"Wrong username or password!\");}}catch(err){setIsSuccess(false);setMessage(\"Network error. Please try again.\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"auth-container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"auth-card\",onSubmit:submit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sign In\"}),/*#__PURE__*/_jsx(\"h5\",{children:\"Enter your credentials to access your account\"}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message \".concat(isSuccess?\"success\":\"error\"),children:message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username or Email\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter your username or email\",value:form.identifier,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{identifier:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Enter your password\",value:form.password,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{password:e.target.value}))})]}),/*#__PURE__*/_jsx(\"button\",{disabled:loading,type:\"submit\",children:loading?\"Signing In...\":\"Sign In\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"muted\",children:[\"Don\\u2019t have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Sign up\"})]})]})});}","map":{"version":3,"names":["React","useState","useDispatch","useSelector","signIn","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","SignIn","dispatch","loading","s","auth","navigate","form","setForm","identifier","password","message","setMessage","isSuccess","setIsSuccess","submit","e","preventDefault","res","meta","requestStatus","setTimeout","_res$payload","payload","err","className","children","onSubmit","concat","placeholder","value","onChange","_objectSpread","target","type","disabled","to"],"sources":["C:/Users/Shashan/Videos/truegradient - 2 Assignment/frontend/src/pages/SignIn.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { signIn } from \"../features/auth/authSlice\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport \"./SignIn.css\";\r\n\r\nexport default function SignIn() {\r\n  const dispatch = useDispatch();\r\n  const { loading } = useSelector((s) => s.auth);\r\n  const navigate = useNavigate();\r\n\r\n  const [form, setForm] = useState({ identifier: \"\", password: \"\" });\r\n  const [message, setMessage] = useState(\"\");\r\n  const [isSuccess, setIsSuccess] = useState(false);\r\n\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!form.identifier || !form.password) {\r\n      setIsSuccess(false);\r\n      setMessage(\"Please enter your username/email and password\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await dispatch(\r\n        signIn({\r\n          identifier: form.identifier,\r\n          password: form.password,\r\n        })\r\n      );\r\n\r\n      if (res.meta.requestStatus === \"fulfilled\") {\r\n        setIsSuccess(true);\r\n        setMessage(\"Login successful! Redirecting...\");\r\n        setTimeout(() => navigate(\"/\"), 1500);\r\n      } else {\r\n        setIsSuccess(false);\r\n        setMessage(res.payload?.message || \"Wrong username or password!\");\r\n      }\r\n    } catch (err) {\r\n      setIsSuccess(false);\r\n      setMessage(\"Network error. Please try again.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth-container\">\r\n      <form className=\"auth-card\" onSubmit={submit}>\r\n        <div>\r\n          <h2>Sign In</h2>\r\n          <h5>Enter your credentials to access your account</h5>\r\n\r\n          {message && (\r\n            <div className={`message ${isSuccess ? \"success\" : \"error\"}`}>\r\n              {message}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div>\r\n          <label>Username or Email</label>\r\n          <input\r\n            placeholder=\"Enter your username or email\"\r\n            value={form.identifier}\r\n            onChange={(e) =>\r\n              setForm({ ...form, identifier: e.target.value })\r\n            }\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label>Password</label>\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Enter your password\"\r\n            value={form.password}\r\n            onChange={(e) => setForm({ ...form, password: e.target.value })}\r\n          />\r\n        </div>\r\n\r\n        <button disabled={loading} type=\"submit\">\r\n          {loading ? \"Signing In...\" : \"Sign In\"}\r\n        </button>\r\n\r\n        <div className=\"muted\">\r\n          Donâ€™t have an account? <Link to=\"/signup\">Sign up</Link>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}